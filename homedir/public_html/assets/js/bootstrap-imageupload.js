if("undefined"==typeof jQuery)throw new Error("bootstrap-imageupload's JavaScript requires jQuery.");!function(e){"use strict";function i(i){b=e.extend({},e.fn.imageupload.defaultOptions,i);var t=this,a=t.find(".file-tab"),o=(t.find(".avatar"),t.find(".panel-heading .btn:eq(0)")),l=a.find('input[type="file"]'),d=a.find(".btn:eq(1)"),m=t.find(".url-tab"),v=t.find(".panel-heading .btn:eq(1)"),h=m.find(".btn:eq(0)"),g=m.find(".btn:eq(1)");s(a),p(m),r(a),n.call(t),o.off(),l.off(),d.off(),v.off(),h.off(),g.off(),o.on("click",function(){e(this).blur(),r(a)}),l.on("change",function(){e(this).blur(),f(a)}),d.on("click",function(){e(this).blur(),s(a)}),v.on("click",function(){e(this).blur(),u(m)}),h.on("click",function(){e(this).blur(),c(m)}),g.on("click",function(){e(this).blur(),p(m)})}function n(){this.removeClass("imageupload-disabled")}function t(e){var i=[];return i.push('<div class="alert alert-danger alert-dismissible">'),i.push('<button type="button" class="close" data-dismiss="alert">'),i.push("<span>&times;</span>"),i.push("</button>"+e),i.push("</div>"),i.join("")}function a(e){return e}function o(e){return e.substr(e.lastIndexOf(".")+1).toLowerCase()}function l(i,n){if(i.size/1024>b.maxFileSizeKb)n(!1,"حجم تصویر زیاد است (بیشترین حجم قابل قبول  :"+b.maxFileSizeKb+"kB).");else{var t=o(i.name);e.inArray(t,b.allowedFormats)>-1?n(!0,"Image file is valid."):n(!1,"File type is not allowed.")}}function d(i,n){var t=null,a=!1,l=new Image;l.onload=function(){if(!a){window.clearTimeout(t);var l=i;-1!==l.indexOf("?")&&(l=l.split("?")[0].split("#")[0]);var d=o(l);e.inArray(d,b.allowedFormats)>-1?n(!0,"Image URL is valid."):n(!1,"لطفا تصویر مناسبی را آپلود کنید")}},l.onerror=function(){a||(window.clearTimeout(t),n(!1,"تصویری یافت نشد"))},l.src=i,t=window.setTimeout(function(){a=!0,l.src="???",n(!1,"Loading image timed out.")},3e3)}function r(e){var i=e.closest(".imageupload"),n=i.find(".panel-heading .btn:eq(0)");if(!n.hasClass("active")){var t=i.find(".url-tab");i.find(".panel-heading .btn:eq(1)").removeClass("active"),n.addClass("active"),t.hide(),e.show(),p(t)}}function s(e){e.find(".alert").remove(),e.find("img").remove(),e.find(".btn span").text("Browse"),e.find(".btn:eq(1)").hide(),e.find("input").val("")}function f(i){var n=i.find(".btn:eq(0)"),o=i.find(".btn:eq(1)"),d=n.find("input");if(i.find(".alert").remove(),i.find("img").remove(),n.find("span").text("Browse"),o.hide(),d[0].files&&d[0].files[0]){n.prop("disabled",!0);var r=d[0].files[0];l(r,function(l,s){if(l){var f=new FileReader;f.onload=function(i){e(".thumbnail").attr("src",a(i.target.result)),n.find("span").text("Change"),o.css("display","inline-block")},f.onerror=function(){i.prepend(t("خطایی رخ داده است .")),d.val("")},f.readAsDataURL(r)}else i.prepend(t(s)),n.find("span").text("Browse"),d.val("");n.prop("disabled",!1)})}}function u(e){var i=e.closest(".imageupload"),n=i.find(".panel-heading .btn:eq(1)");if(!n.hasClass("active")){var t=i.find(".file-tab");i.find(".panel-heading .btn:eq(0)").removeClass("active"),n.addClass("active"),t.hide(),e.show(),s(t)}}function p(e){e.find(".alert").remove(),e.find("img").remove(),e.find(".btn:eq(1)").hide(),e.find("input").val("")}function c(i){var n=i.find('input[type="text"]'),o=i.find(".btn:eq(0)"),l=i.find(".btn:eq(1)");i.find(".alert").remove(),i.find("img").remove(),l.hide();var r=n.val();r?(n.prop("disabled",!0),o.prop("disabled",!0),d(r,function(d,s){d?(i.find('input[type="hidden"]').val(r),e(a(r)).insertAfter(o.closest(".input-group")),l.css("display","inline-block")):i.prepend(t(s)),n.prop("disabled",!1),o.prop("disabled",!1)})):i.prepend(t("Please enter an image URL."))}var b={},m={init:i,disable:function(){this.addClass("imageupload-disabled")},enable:n,reset:function(){var e=this;i.call(e,b)}};e.fn.imageupload=function(i){var n=arguments;return this.filter("div").each(function(){if(m[i])m[i].apply(e(this),Array.prototype.slice.call(n,1));else{if("object"!=typeof i&&i)throw new Error('Method "'+i+'" is not defined for imageupload.');m.init.apply(e(this),n)}})},e.fn.imageupload.defaultOptions={allowedFormats:["jpg","jpeg","png","gif"],maxWidth:100,maxHeight:100,maxFileSizeKb:8192}}(jQuery);